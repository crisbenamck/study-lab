#!/bin/bash

echo "ğŸ§ª Probando el sistema de reintentos de Gemini..."
echo ""
echo "ğŸ“‹ Para probar manualmente:"
echo "1. Abre la aplicaciÃ³n en http://localhost:5173"
echo "2. Ve a la pestaÃ±a 'Importar desde PDF'"
echo "3. Configura tu API key de Gemini"
echo "4. Sube un PDF cuando el servicio estÃ© experimentando errores 503"
echo ""
echo "âœ… Comportamiento esperado:"
echo "- VerÃ¡s logs en la consola indicando reintentos automÃ¡ticos"
echo "- El sistema probarÃ¡ mÃºltiples modelos: 2.5-pro â†’ 2.5-flash â†’ 2.5-flash-lite â†’ 2.0-flash-15 â†’ 2.0-flash-lite"
echo "- Cada modelo se intentarÃ¡ hasta 3 veces con delays exponenciales"
echo "- El usuario verÃ¡ mensajes informativos sobre el progreso"
echo ""
echo "ğŸ“Š Logs de ejemplo esperados:"
echo "ğŸ”„ Modelo gemini-2.5-pro - Intento 1/3"
echo "âŒ Error con modelo gemini-2.5-pro, intento 1: 503 Service Unavailable"
echo "â³ Modelo sobrecargado, reintentando en 4000ms..."
echo "ğŸ”„ Modelo gemini-2.5-pro - Intento 2/3"
echo "âŒ Error con modelo gemini-2.5-pro, intento 2: 503 Service Unavailable"
echo "â³ Modelo sobrecargado, reintentando en 8000ms..."
echo "ğŸ”„ Probando con modelo: gemini-2.5-flash"
echo "âœ… Exitoso con modelo gemini-2.5-flash en intento 1"
echo ""
echo "ğŸ¯ El proceso deberÃ­a completarse exitosamente con un modelo alternativo."